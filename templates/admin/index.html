<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title><%= title %></title>
    <link rel="shortcut icon" href="/static/images/icons/favicon.ico"/>
    <link rel="bookmark" href="/static/images/icons/favicon.ico"/>
    <link rel="stylesheet" href="/static/plugins/zui/css/zui.css">
    <link rel="stylesheet" href="/templatesJs/admin/css/style.css">
    <style>
        ul, li, i {
            font-style: normal;
            list-style: none;
            margin: 0;
            padding: 0;
            -webkit-margin-start: 0;
        }
        a, a:hover, a:active, a:visited, a:link {
            color: inherit;
            text-decoration: none;
        }
        .g-sidebar {
            position: fixed;
            width: 200px;
            top: 50px;
            left: 0;
            bottom: 0;
            background-color: #37474f;
            color: white;
            font-size: 14px;
            z-index: 10;
        }
        .g-sidebar ul li a {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
        }
        .g-sidebar ul li a em {
            float: right;
            transition: all .3s;
            font-size: 14px;
        }
        .g-sidebar ul li ul {
            height: 0;
            overflow: hidden;
            font-size: 14px;
        }
        .g-sidebar ul li ul li a {
            padding-left: 40px;
        }
        .g-sidebar ul .g-active ul {
            height: auto;
        }
        .g-sidebar ul .g-menu ul .g-active {
            background-color: #228888;
        }
        .g-sidebar ul li .g-title {
            border-left: 4px solid #37474f;
        }
        .g-sidebar ul .g-active .g-title {
            background-color: rgba(0, 0, 0, .3);
            border-left: 4px solid #228888;
            transition: border-left-color .3s;
        }
        .g-sidebar ul .g-active .g-title span {
            display: inline-block;
            /*padding-left: 10px;*/
        }
        .g-sidebar ul li .g-title span .icon {
            margin-right: 10px;
        }
        .g-sidebar ul .g-active .g-title em {
            transform: rotateZ(-90deg);
        }

        .g-nav-bar {
            position: fixed;
            height: 50px;
            top: 0;
            left: 0;
            right: 0;
            background-color: white;
            color: #37474f;
            padding-right: 10px;
            z-index: 10;
        }
        /*.g-nav-bar::before {*/
            /*display: block;*/
            /*content: '';*/
            /*position: absolute;*/
            /*bottom: 0;*/
            /*left: 0;*/
            /*right: 0;*/
            /*height: 1px;*/
            /*background-color: #f6f6f6;*/
            /*z-index: 1;*/
            /*-webkit-transform: scaleY(.5);*/
            /*-moz-transform: scaleY(.5);*/
            /*-ms-transform: scaleY(.5);*/
            /*-o-transform: scaleY(.5);*/
            /*transform: scaleY(.5);*/
        /*}*/
        .g-nav-bar .g-logo {
            display: inline-block;
            background-color: #37474f;
            color: white;
        }
        .g-nav-bar .g-logo a {
            display: inline-block;
            width: 200px;
            height: 50px;
            text-align: center;
            line-height: 50px;
        }
        .g-nav-bar .icon-sliders {
            font-size: 20px;
            padding: 10px;
            cursor: pointer;
        }
        .g-nav-bar .g-logo-content {
            display: inline-flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
        }
        .g-nav-bar .user_icon {
            width: 40px;
            height: 40px;
            border-radius: 42px;
            border: 1px solid white;
        }
        @media (max-width: 768px) {
            .g-sidebar {
                box-shadow: 0 2px 10px 0 rgba(0, 0, 0, .9);
            }
            .g-nav-bar {
                background-color: #37474f;
                color: white;
            }
            .g-nav-bar .g-logo-content {
                display: inline-flex;
                flex-direction: row-reverse;
                justify-content: end;
                align-items: center;
            }
        }
        .float-right {
            float: right;
        }
        .g-nav-bar .other-info {
            height: 50px;
            display: flex;
            flex-direction: row;
            justify-content: flex-end;
            align-items: center;
            z-index: 10;
        }
        .admin-container {
            position: fixed;
            top: 51px;
            left: 200px;
            bottom: 40px;
            right: 0;
            transition: all .3s;
        }
        .admin-footer {
            position: fixed;
            height: 40px;
            left: 200px;
            bottom: 0;
            right: 0;
            background-color: #f3f3f3;
            transition: all .3s;
            line-height: 40px;
            padding-left: 10px;
        }
        .admin-container-fluid, .admin-footer-fluid {
            left: 0;
        }
        .admin-container .header-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 40px;
            background-color: white;
            box-shadow: 0 0 2px 0 rgba(0, 0, 0, .1);
            z-index: 10;
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: center;
        }
        .admin-container .header-bar .tempNav {
            border-right: 1px solid #f6f6f6;
            height: 40px;
            line-height: 40px;
            text-align: center;
            padding: 0 10px;
            cursor: pointer;
            position: relative;
        }
        .admin-container .header-bar .tempNav:hover, .admin-container .header-bar .active {
            background-color: #f6f6f6;
        }
        .admin-container .header-bar .tempNav .top-line {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background-color: transparent;
            transition: all .3s;
        }
        .admin-container .header-bar .tempNav:hover .top-line, .admin-container .header-bar .active .top-line {
            background-color: #37474f;
        }
        .admin-container .header-bar .tempNav i {
            display: inline-block;
            height: 100%;
            padding: 0 10px;
        }
        .admin-container .header-bar .tempNav .close {
            height: 40px;
            line-height: 40px;
            width: 30px;
            text-align: right;
            float: right;
        }
        .admin-container .admin-container-iframe {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 40px;
            left: 0;
            bottom: 0;
            right: 0;
        }
        .admin-container .admin-container-iframe iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div id="app">
        <transition name="appShow">
            <div v-show="appShow" class="container-fluid">
                <!-- 页眉导航栏 -->
                <nav class="g-nav-bar">
                    <div class="g-logo-content">
                        <li class="g-logo"><a href="#"><%= title%></a></li>
                        <span v-show="showLeftNavBar" @click="logoDidClicked" class="icon icon-sliders"></span>
                        <span v-show="!showLeftNavBar" @click="logoDidClicked" class="icon icon-sliders" style="transform: rotateY(180deg);"></span>
                    </div>
                    <div class="float-right other-info">
                        <div class="btn-group">
                            <img class="user_icon" src="/static/images/icons/user_icon.png" alt="">
                            <span style="cursor: pointer;" class="dropdown-toggle" data-toggle="dropdown">区区电脑 <span class="caret"></span></span>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li><a href="###">操作</a></li>
                                <li><a href="###">账号设置</a></li>
                                <li class="divider"></li>
                                <li @click="logout"><a href="###">退出</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>

                <!-- 侧边栏 -->
                <transition name="showLeftNavBar">
                    <nav v-show="showLeftNavBar" class="g-sidebar">
                        <ul>
                            <li v-for="(item, index) in navigationItems" :key="'item_'+index" class="g-menu">
                                <a class="g-title"  href="#">
                                    <span><i class="icon icon-user"></i><i>{{ item.title }}</i></span><em class="icon icon-chevron-left"></em>
                                </a>
                                <ul>
                                    <li v-for="(subItem, subIndex) in item.subNavItems" :key="'subItem_'+subIndex" @click="subNavDidClicked(subItem)"><a href="#">{{ subItem.title }}</a></li>
                                </ul>
                            </li>

                        </ul>
                    </nav>
                </transition>

                <!-- 主体内容 -->
                <div :class="{ 'admin-container': true, 'admin-container-fluid': !showLeftNavBar }">
                    <div class="header-bar">
                        <div v-for="(nav, index) in tempNavs" :key="'temp_'+ index" :class="{'tempNav': true, 'active': nav.active}">
                            <span class="top-line"></span>
                            <i @click="changeContent(index)" >{{nav.title}}</i>
                            <div @click="closeTemp(index)" class="close">×</div>
                        </div>
                    </div>
                    <div class="admin-container-iframe">
                        <iframe class="" :src="currentNav.src"></iframe>
                    </div>
                </div>

                <!-- 页脚 -->
                <div :class="{ 'admin-footer': true, 'admin-footer-fluid': !showLeftNavBar }">
                    <p><span>Express&typescript </span></p>
                </div>
            </div>
        </transition>
    </div>
</body>
<script type="text/javascript" src="/static/plugins/jquery.min.js"></script>
<script type="text/javascript" src="/static/plugins/zui/js/zui.js"></script>
<script type="text/javascript" src="/static/plugins/web.tool.js"></script>
<script type="text/javascript" src="/static/plugins/vue.min.js"></script>
<script type="text/javascript" src="/templatesJs/admin/index.js"></script>
<script>
    //// 绑定点击事件需要在 vue 组件渲染完成之后
    function setClickEvents() {
       setTimeout(function () {
           $('.g-sidebar .g-menu .g-title').click(function () {
               console.log(888)
               if ($(this).parent().hasClass('g-active')) {
                   $(this).parent().removeClass('g-active');
               } else {
                   $(this).parent().addClass('g-active');
               }
           });
           $('.g-sidebar .g-menu ul li').click(function () {
               $('.g-sidebar .g-menu ul .g-active').removeClass('g-active');
               $(this).addClass('g-active');
           });
           $('.g-logo').click(function () {
               window.location.reload();
           });
       }, 10);
    }
</script>
</html>
